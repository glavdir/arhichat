{"version":3,"sources":["webpack:///1.build.js","webpack:///./src/components/characterEdit.vue","webpack:///src/components/characterEdit.vue","webpack:///src/components/tagsInput.vue","webpack:///./src/components/characterEdit.vue?a15a","webpack:///./src/components/characterEdit.vue?a812","webpack:///./src/components/characterEdit.vue?4ccd","webpack:///./src/components/characterEdit.vue?9872","webpack:///./src/components/tagsInput.vue","webpack:///./src/components/tagsInput.vue?8424","webpack:///./src/components/tagsInput.vue?23eb","webpack:///./src/components/tagsInput.vue?6702","webpack:///./src/components/characterEdit.vue?6ed5"],"names":["webpackJsonp","255","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_characterEdit_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0f90f752_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_characterEdit_vue__","normalizeComponent","__vue_styles__","Component","260","editDataDefault","id","name","description","author","author_name","tags","__WEBPACK_IMPORTED_MODULE_2_diff_match_patch__","__WEBPACK_IMPORTED_MODULE_3__tagsInput_vue__","n","components","tags-input","data","currentChar","charList","charFilter","tagsFilter","tagPattern","editData","allTags","created","this","$socket","emit","computed","filteredCharacters","tFilter","remove_empty_elements","nameFilter","trim","filterName","length","filterTags","filtered","c","character","toLowerCase","includes","push","suits","tag","methods","stringlist","newList","s","find_characters","filters","setCharacterList","lastCharId","i","selectCharacter","this_app","setCharacterData","JSON","parse","resetEditData","saveChanges","currentCharText","$refs","options","selectedIndex","text","window","confirm","alert","Character","result","deleteCharacter","console","log","sockets","character_list","character_tags","261","__WEBPACK_IMPORTED_MODULE_0_onclick_outside__","__WEBPACK_IMPORTED_MODULE_0_onclick_outside___default","model","prop","event","props","outTags","Array","fullTagList","ClickOutside","a","listVisible","listFilter","focusedItem","tagsFiltered","inputText","t","get","join","set","tags_string","validateString","split","$emit","processArrowKeyDown","setSelectorVisible","search_input","list","firstElementChild","nextElementSibling","focus","processArrowKeyUp","lastElementChild","previousElementSibling","show","focusInput","_this","$nextTick","tags_input","replace","addTagToOut","handleClickOutside","e","269","exports","content","locals","270","271","272","273","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_tagsInput_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7a0b7f55_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_tagsInput_vue__","274","275","276","render","_vm","_h","$createElement","_c","_self","attrs","handler","staticClass","on","keydown","$event","_k","keyCode","key","directives","rawName","expression","ref","type","placeholder","domProps","input","target","composing","_v","title","click","tabindex","_l","index","_s","_e","staticRenderFns","esExports","277","maxlength","callback","$$v","size","change","$$selectedVal","prototype","filter","call","o","selected","map","_value","multiple","ch","$set","rows","showTagSelector","disabled"],"mappings":"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","file":"1.build.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 255:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_characterEdit_vue__ = __webpack_require__(260);\n/* empty harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0f90f752_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_characterEdit_vue__ = __webpack_require__(277);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(269)\n  __webpack_require__(271)\n}\nvar normalizeComponent = __webpack_require__(5)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0f90f752\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_characterEdit_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0f90f752_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_characterEdit_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 260:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__global_js__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_diff_match_patch__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_diff_match_patch___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_diff_match_patch__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__tagsInput_vue__ = __webpack_require__(273);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\nfunction editDataDefault() {\n    return {\n        id: null,\n        name: \"\",\n        description: \"\",\n        author: null,\n        author_name: \"\",\n        tags: []\n    };\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    components: {\n        'tags-input': __WEBPACK_IMPORTED_MODULE_3__tagsInput_vue__[\"a\" /* default */]\n    },\n    data: function data() {\n        return {\n            currentChar: \"\",\n            charList: [],\n            charFilter: \"\",\n            tagsFilter: [],\n            tagPattern: \"[\\\\s0-9a-zA-Zа-яА-Я_]+\",\n            editData: editDataDefault(),\n            allTags: []\n        };\n    },\n    created: function created() {\n        var this_app = this;\n        this.$socket.emit('find_characters');\n        this.$socket.emit('get_tags');\n    },\n\n    computed: {\n        filteredCharacters: function filteredCharacters() {\n\n            var tFilter = this.remove_empty_elements(this.tagsFilter);\n            var nameFilter = this.charFilter.trim();\n            var filterName = nameFilter.length > 0;\n            var filterTags = tFilter.length > 0;\n\n            if (!filterName && !filterTags) {\n                return this.charList;\n            }\n\n            var filtered = [];\n            for (var c in this.charList) {\n                var character = this.charList[c];\n                if (filterName && character.name.toLowerCase().includes(nameFilter.toLowerCase())) {\n                    if (!filtered.includes(character)) filtered.push(character);\n                    continue;\n                }\n                if (filterTags) {\n                    var suits = true;\n\n                    for (var tag in tFilter) {\n                        if (!character.tags.includes(tFilter[tag])) {\n                            suits = false;\n                            break;\n                        }\n                    }\n                    if (suits && !filtered.includes(character)) filtered.push(character);\n                }\n            }\n            return filtered;\n        }\n    },\n\n    methods: {\n        remove_empty_elements: function remove_empty_elements(stringlist) {\n            var newList = [];\n            for (var s in stringlist) {\n                if (stringlist[s] != '') newList.push(stringlist[s]);\n            }\n            return newList;\n        },\n        find_characters: function find_characters() {\n            var filters = {\n                name: this.charFilter,\n                tags: this.remove_empty_elements(this.tagsFilter)\n            };\n            this.$socket.emit('find_characters', filters);\n        },\n        setCharacterList: function setCharacterList(data) {\n            var lastCharId = this.currentChar;\n            this.charList = data;\n\n            if (lastCharId) {\n                for (var i in this.charList) {\n                    if (this.charList[i].id == lastCharId) {\n                        this.selectCharacter();\n                        return;\n                    }\n                }\n            }\n        },\n        //            filter_characters: function()\n        //            {\n        //                var filterName = this.charFilter.length > 0\n        //                var filterTags = this.tagsFilter.length > 0\n        //\n        //                if(!filterName && !filterTags) {\n        //                    return this.charList;\n        //                }\n        //\n        //                var filtered = []\n        //                for(var character in this.charList)\n        //                {\n        //                    if(filterName && character.includes(this.charFilter)){\n        //                        filtered.push(character)\n        //                        continue\n        //                    }\n        //                    if(filterTags)\n        //                    {\n        //                        var suits = true\n        //                        for(var tag in this.tagsFilter)\n        //                        {\n        //                            if(!character.tags.includes(tag)){\n        //                                suits = false;\n        //                                break;\n        //                            }\n        //                            if(suits)\n        //                                filtered.push(character)\n        //                        }\n        //                    }\n        //                }\n        //                return filtered;\n        //            },\n        selectCharacter: function selectCharacter() {\n            if (!this.currentChar || this.currentChar.length == 0) {\n                this.editData = editDataDefault();\n            } else {\n                var this_app = this;\n                this.$socket.emit('get_character_info', { id: this.currentChar }, function (data) {\n                    this_app.setCharacterData(JSON.parse(data));\n                });\n            }\n        },\n        setCharacterData: function setCharacterData(data) {\n            this.editData = data;\n        },\n        resetEditData: function resetEditData() {\n            this.editData = editDataDefault();\n            this.currentChar = null;\n        },\n        saveChanges: function saveChanges(data) {\n            if (this.currentChar) {\n                var currentCharText = this.$refs['charSelect'].options[this.$refs['charSelect'].selectedIndex].text;\n                if (!window.confirm('Вы точно хотите изменить персонажа \"' + currentCharText + '\"?')) return;\n            }\n            if (this.editData.name.length == 0 || this.editData.description.length == 0) {\n                alert('Заполните поля \"Имя\" и \"Описание\" для сохранения персонажа');\n                return;\n            }\n            this.editData.tags = this.remove_empty_elements(this.editData.tags);\n            var name = this.editData.name;\n            var this_app = this;\n            this.$socket.emit('save_character', { 'Character': this.editData }, function (result) {\n\n                if (result) {\n                    alert('Персонаж \"' + name + '\" успешно сохранен');\n                    this_app.find_characters();\n                    this_app.setCharacterData(JSON.parse(result));\n                } else alert('Упс! Не получилось создать персонажа \"' + name + '\"');\n            });\n        },\n        deleteCharacter: function deleteCharacter() {\n            if (!this.currentChar) {\n                alert('Такого персонажа не существует. Персонаж не выбран или кто-то его уже удалил пока вы тупили. ' + 'Перезагрузите страницу');\n                return;\n            }\n            var currentCharText = this.$refs['charSelect'].options[this.$refs['charSelect'].selectedIndex].text;\n            console.log(currentCharText);\n            if (window.confirm('Вы точно хотите удалить персонажа \"' + currentCharText + '\"?')) {\n                if (window.confirm('Если потом передумаете придётся восстанавливать вручную. Точно удалять?')) {\n                    var this_app = this;\n                    this.$socket.emit('delete_character', { 'Character': this.currentChar }, function (result) {\n                        console.log(result);\n                        if (result) {\n                            alert('Персонаж \"' + currentCharText + '\" удалён');\n                            this_app.resetEditData();\n                            this_app.find_characters();\n                        } else alert('Упс! Что-то пошло не так. Персонаж \"' + currentCharText + '\" не был удалён');\n                    });\n                }\n            }\n        }\n    },\n    sockets: {\n        character_list: function character_list(data) {\n            this.setCharacterList(JSON.parse(data));\n        },\n        character_tags: function character_tags(data) {\n            this.allTags = JSON.parse(data);\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 261:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_onclick_outside__ = __webpack_require__(170);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_onclick_outside___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_onclick_outside__);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    model: {\n        prop: 'outTags',\n        event: 'input'\n    },\n    props: {\n        outTags: Array,\n        fullTagList: Array\n    },\n    components: {\n        ClickOutside: __WEBPACK_IMPORTED_MODULE_0_onclick_outside___default.a\n    },\n    data: function data() {\n        return {\n            listVisible: false,\n            listFilter: '',\n            focusedItem: null\n        };\n    },\n    computed: {\n        tagsFiltered: function tagsFiltered() {\n            if (this.inputText == 0) {\n                return this.fullTagList;\n            }\n            var tags = [];\n            for (var t in this.fullTagList) {\n\n                if (this.fullTagList[t].includes(this.listFilter)) tags.push(this.fullTagList[t]);\n            }\n            return tags;\n        },\n        inputText: {\n            get: function get() {\n                return this.outTags.join(' ');\n            },\n            set: function set(tags_string) {\n                var tags = this.validateString(tags_string).split(' ');\n                this.$emit('input', tags);\n            }\n        }\n    },\n    methods: {\n        //            sendChangeEvent: function(){\n        //                var tags = this.validateString(this.inputText).split(' ')\n        //                this.$emit('change', tags)\n        //            },\n        processArrowKeyDown: function processArrowKeyDown() {\n            if (!this.listVisible) {\n                this.setSelectorVisible(true);\n                return;\n            }\n            if (this.focusedItem == this.$refs.search_input) {\n                this.focusedItem = this.$refs.list.firstElementChild;\n            } else {\n                this.focusedItem = this.focusedItem.nextElementSibling;\n                if (!this.focusedItem) this.focusedItem = this.$refs.list.firstElementChild;\n            }\n            if (this.focusedItem) this.focusedItem.focus();\n        },\n        processArrowKeyUp: function processArrowKeyUp() {\n            if (!this.listVisible) {\n                this.setSelectorVisible(true);\n                return;\n            }\n            if (this.focusedItem == this.$refs.search_input) {\n                this.focusedItem = this.$refs.list.lastElementChild;\n            } else {\n                this.focusedItem = this.focusedItem.previousElementSibling;\n                if (!this.focusedItem) this.focusedItem = this.$refs.list.lastElementChild;\n            }\n            if (this.focusedItem) this.focusedItem.focus();\n        },\n\n        setSelectorVisible: function setSelectorVisible(show, focusInput) {\n            var _this = this;\n\n            this.listVisible = show;\n            if (!show) {\n                this.listFilter = \"\";\n                if (focusInput) {\n                    this.$refs.tags_input.focus();\n                }\n            } else {\n                this.$nextTick(function () {\n                    _this.$refs.search_input.focus();\n                    _this.focusedItem = _this.$refs.search_input;\n                });\n            }\n        },\n        validateString: function validateString(tags_string) {\n            var str = tags_string.toLowerCase().replace(/\\s+/g, ' ').replace(/[^\\s0-9a-zA-Zа-яА-Я_]+/, '');\n            return str;\n        },\n        addTagToOut: function addTagToOut(tag) {\n            this.setSelectorVisible(false, true);\n            if (!this.outTags.includes(tag)) this.outTags.push(tag);\n        },\n        handleClickOutside: function handleClickOutside(e) {\n            this.setSelectorVisible(false);\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 269:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(270);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(4)(\"3c6d9f82\", content, true);\n\n/***/ }),\n\n/***/ 270:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(3)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".characterEdit_root[data-v-0f90f752]{padding:.5em}input_field[data-v-0f90f752]{border:1px solid gray;padding:0 .1em}.flex_container[data-v-0f90f752]{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;flex-wrap:wrap}.flex_element[data-v-0f90f752]{flex-grow:2}.full_width[data-v-0f90f752]{width:100%}.space_after[data-v-0f90f752]{padding-right:.5rem}.frame[data-v-0f90f752]{border:1px solid #d3d3d3;border-radius:3px}.thickLine[data-v-0f90f752]{margin:.3em 0}.v_center[data-v-0f90f752]{margin:auto}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 271:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(272);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(4)(\"01ca6fc9\", content, true);\n\n/***/ }),\n\n/***/ 272:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(3)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".characterEdit_root input[type=text]{padding:0 .1em}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 273:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_tagsInput_vue__ = __webpack_require__(261);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7a0b7f55_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_tagsInput_vue__ = __webpack_require__(276);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(274)\n}\nvar normalizeComponent = __webpack_require__(5)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7a0b7f55\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_tagsInput_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7a0b7f55_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_tagsInput_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 274:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(275);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(4)(\"6338f311\", content, true);\n\n/***/ }),\n\n/***/ 275:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(3)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".tags[data-v-7a0b7f55]{position:relative;display:flex;flex-grow:2;border:1px solid #d3d3d3}.tags_input[data-v-7a0b7f55]{border:none;flex-grow:2}.tags_select_button[data-v-7a0b7f55]{cursor:pointer;border:none;border-left:1px solid #fafafa;background:#f8f8f8;flex-grow:0}.tags_select_button[data-v-7a0b7f55]:hover{background-color:#fff}.tags_list_frame[data-v-7a0b7f55]{position:absolute;overflow:auto;max-height:6rem;top:calc(100% + 2px);background:#fff;border-radius:0;right:0;z-index:100;padding:.2em;border:1px solid gray;box-shadow:3px 3px 5px 0 rgba(0,0,0,.2)}.tags_list_frame ul[data-v-7a0b7f55]{margin:.3em 0}.tags_list_frame li[data-v-7a0b7f55]{padding:0 .3em 0 .2em;cursor:pointer}.tags_list_frame li[data-v-7a0b7f55]:focus,.tags_list_frame li[data-v-7a0b7f55]:hover{background-color:#cfe7f0}.tags_select_search[data-v-7a0b7f55]{border:none;border-bottom:1px solid #d3d3d3}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 276:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('click-outside',{attrs:{\"handler\":_vm.handleClickOutside}},[_c('div',{staticClass:\"tags\",on:{\"keydown\":[function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"esc\",27,$event.key)){ return null; }_vm.setSelectorVisible(false, true)},function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"down\",40,$event.key)){ return null; }_vm.processArrowKeyDown()},function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"up\",38,$event.key)){ return null; }_vm.processArrowKeyUp()}]}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputText),expression:\"inputText\"}],ref:\"tags_input\",staticClass:\"tags_input\",attrs:{\"type\":\"text\",\"placeholder\":\"Тэги через пробел\"},domProps:{\"value\":(_vm.inputText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputText=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"tags_select_button\",attrs:{\"title\":\"Добавить тэг из списка существующих.\\nОткрывается нажатием ↓ из строки поиска\"},on:{\"click\":function($event){_vm.setSelectorVisible(!_vm.listVisible)}}},[_vm._v(\"+\\n            \")]),_vm._v(\" \"),(_vm.listVisible)?_c('div',{ref:\"tag_list\",staticClass:\"tags_list_frame\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.listFilter),expression:\"listFilter\"}],ref:\"search_input\",staticClass:\"tags_select_search\",attrs:{\"type\":\"text\",\"placeholder\":\" Поиск\",\"tabindex\":\"0\"},domProps:{\"value\":(_vm.listFilter)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.listFilter=$event.target.value}}}),_vm._v(\" \"),_c('ul',{ref:\"list\",attrs:{\"tabindex\":\"1\"}},_vm._l((_vm.tagsFiltered),function(tag,index){return _c('li',{staticClass:\"tags_select_li\",attrs:{\"tabindex\":index + 1},on:{\"click\":function($event){_vm.addTagToOut(tag)},\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.addTagToOut(tag)}}},[_vm._v(\"\\n                        \"+_vm._s(tag)+\"\\n                    \")])}))]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 277:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"characterEdit_root\"},[_c('fieldset',{staticClass:\"frame\"},[_c('legend',[_vm._v(\"Поиск\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\"},[_c('span',{staticClass:\"space_after v_center\"},[_vm._v(\"Имя\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.charFilter),expression:\"charFilter\"}],staticClass:\"flex_element input_field v_center\",attrs:{\"type\":\"text\",\"maxlength\":\"64\",\"placeholder\":\"Имя или его начало\"},domProps:{\"value\":(_vm.charFilter)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.charFilter=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\"},[_c('span',{staticClass:\"space_after v_center\"},[_vm._v(\"Тэги\")]),_vm._v(\" \"),_c('tags-input',{staticClass:\"flex_element v_center\",attrs:{\"fullTagList\":_vm.allTags,\"maxlength\":\"64\",\"placeholder\":\"Тэги через пробел\"},model:{value:(_vm.tagsFilter),callback:function ($$v) {_vm.tagsFilter=$$v},expression:\"tagsFilter\"}})],1),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentChar),expression:\"currentChar\"}],ref:\"charSelect\",staticClass:\"full_width thickLine\",attrs:{\"size\":\"5\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.currentChar=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.selectCharacter]}},_vm._l((_vm.filteredCharacters),function(ch){return _c('option',{domProps:{\"value\":ch.id}},[_vm._v(_vm._s(ch.name))])}))]),_vm._v(\" \"),_c('fieldset',{staticClass:\"frame\"},[_c('legend',[_vm._v(\"Персонаж\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\"},[_c('span',{staticClass:\"space_after v_center\"},[_vm._v(\"Имя\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editData.name),expression:\"editData.name\"}],staticClass:\"flex_element input_field\",attrs:{\"type\":\"text\",\"maxlength\":\"64\",\"placeholder\":\"Мне нужно ИМЯ!\"},domProps:{\"value\":(_vm.editData.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.editData, \"name\", $event.target.value)}}})]),_vm._v(\" \"),_c('span',{staticClass:\"thickLine v_center\"},[_vm._v(\"Описание\")]),_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"flex_container\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editData.description),expression:\"editData.description\"}],staticClass:\"full_width thickLine\",attrs:{\"rows\":\"4\"},domProps:{\"value\":(_vm.editData.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.editData, \"description\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\",attrs:{\"id\":\"character_tags_container\"},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"esc\",27,$event.key)){ return null; }_vm.showTagSelector(false)}}},[_c('span',{staticClass:\" space_after v_center\"},[_vm._v(\"Тэги\")]),_vm._v(\" \"),_c('tags-input',{staticClass:\"flex_element v_center\",attrs:{\"fullTagList\":_vm.allTags,\"maxlength\":\"64\",\"placeholder\":\"Тэги через пробел\"},model:{value:(_vm.editData.tags),callback:function ($$v) {_vm.$set(_vm.editData, \"tags\", $$v)},expression:\"editData.tags\"}})],1),_vm._v(\" \"),(_vm.editData.author)?_c('div',{staticClass:\"thickLine\"},[_c('span',[_vm._v(\"Автор:\")]),_vm._v(\" \"),_c('span',{staticClass:\"display_frame \"},[_vm._v(_vm._s(_vm.editData.author_name))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\"},[_c('button',{attrs:{\"title\":\"Сбросить редактирование\"},on:{\"click\":_vm.resetEditData}},[_vm._v(\"Новый\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex_element\"}),_vm._v(\" \"),_c('button',{attrs:{\"id\":\"delete_button\",\"title\":\"Отправить персонажа в варп\",\"disabled\":!_vm.currentChar},on:{\"click\":_vm.deleteCharacter}},[_vm._v(\"Удалить\\n            \")]),_vm._v(\" \"),_c('button',{attrs:{\"id\":\"save_button\",\"title\":\"Сохранить\"},on:{\"click\":_vm.saveChanges}},[_vm._v(\"Сохранить\\n            \")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 1.build.js","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f90f752\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./characterEdit.vue\")\n  require(\"!!vue-style-loader!css-loader?minimize!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f90f752\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./characterEdit.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./characterEdit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./characterEdit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f90f752\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./characterEdit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0f90f752\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/characterEdit.vue\n// module id = 255\n// module chunks = 1","<template>\r\n    <div class=\"characterEdit_root\">\r\n\r\n        <fieldset class=\"frame\">\r\n            <legend>Поиск</legend>\r\n            <div class=\"flex_container thickLine\">\r\n                <span class=\"space_after v_center\">Имя</span><input type=\"text\" maxlength=\"64\" v-model=\"charFilter\"\r\n                                                                    class=\"flex_element input_field v_center\"\r\n                                                                    placeholder=\"Имя или его начало\">\r\n            </div>\r\n            <div class=\"flex_container thickLine\">\r\n                <span class=\"space_after v_center\">Тэги</span>\r\n                <tags-input class=\"flex_element v_center\"\r\n                            :fullTagList=\"allTags\"\r\n                            v-model=\"tagsFilter\"\r\n                            maxlength=\"64\"\r\n                            placeholder=\"Тэги через пробел\"/>\r\n            </div>\r\n            <!--<div class=\"flex_container thickLine\">-->\r\n                <!--<div class=\"flex_element\"></div>-->\r\n                <!--<button @click=\"find_characters\">Найти</button>-->\r\n            <!--</div>-->\r\n            <select ref=\"charSelect\" v-model=\"currentChar\" @change=\"selectCharacter\" size=\"5\"\r\n                    class=\"full_width thickLine\">\r\n                <option v-for=\"ch in filteredCharacters\" v-bind:value=\"ch.id\">{{ ch.name }}</option>\r\n            </select>\r\n        </fieldset>\r\n        <fieldset class=\"frame\">\r\n            <legend>Персонаж</legend>\r\n            <div class=\"flex_container thickLine\">\r\n                <span class=\"space_after v_center\">Имя</span>\r\n                <input type=\"text\" maxlength=\"64\"\r\n                       v-model=\"editData.name\"\r\n                       class=\"flex_element input_field\"\r\n                       placeholder=\"Мне нужно ИМЯ!\">\r\n            </div>\r\n\r\n            <span class=\"thickLine v_center\">Описание</span><br/>\r\n            <div class=\"flex_container\">\r\n                <textarea v-model=\"editData.description\" class=\"full_width thickLine\" rows=\"4\"></textarea>\r\n            </div>\r\n            <div id=\"character_tags_container\" class=\"flex_container thickLine\" @keydown.esc=\"showTagSelector(false)\">\r\n                <span class=\" space_after v_center\">Тэги</span>\r\n                <tags-input class=\"flex_element v_center\"\r\n                            :fullTagList=\"allTags\"\r\n                            v-model=\"editData.tags\"\r\n                            maxlength=\"64\"\r\n                            placeholder=\"Тэги через пробел\"/>\r\n            </div>\r\n            <div v-if=\"editData.author\" class=\"thickLine\">\r\n                <span>Автор:</span>\r\n                <span class=\"display_frame \">{{ editData.author_name }}</span>\r\n            </div>\r\n            <div class=\"flex_container thickLine\">\r\n                <button @click=\"resetEditData\" title=\"Сбросить редактирование\">Новый</button>\r\n                <div class=\"flex_element\"></div>\r\n                <button @click=\"deleteCharacter\" id=\"delete_button\" title=\"Отправить персонажа в варп\"\r\n                        :disabled=\"!currentChar\">Удалить\r\n                </button>\r\n                <button @click=\"saveChanges\" id=\"save_button\" title=\"Сохранить\">Сохранить\r\n                </button>\r\n\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    import global from '../global.js';\r\n    import Vue from 'vue';\r\n    import diff_match_patch from 'diff-match-patch'\r\n    import tags_input from './tagsInput.vue'\r\n\r\n    function editDataDefault() {\r\n        return {\r\n            id: null,\r\n            name: \"\",\r\n            description: \"\",\r\n            author: null,\r\n            author_name: \"\",\r\n            tags: []\r\n        };\r\n    }\r\n\r\n    export default {\r\n        components: {\r\n            'tags-input': tags_input\r\n        },\r\n        data() {\r\n            return {\r\n                currentChar: \"\",\r\n                charList: [],\r\n                charFilter: \"\",\r\n                tagsFilter: [],\r\n                tagPattern: \"[\\\\s0-9a-zA-Zа-яА-Я_]+\",\r\n                editData: editDataDefault(),\r\n                allTags: []\r\n            }\r\n        },\r\n        created() {\r\n            var this_app = this;\r\n            this.$socket.emit('find_characters');\r\n            this.$socket.emit('get_tags');\r\n        },\r\n        computed: {\r\n            filteredCharacters: function () {\r\n\r\n                var tFilter = this.remove_empty_elements(this.tagsFilter)\r\n                var nameFilter = this.charFilter.trim()\r\n                var filterName = nameFilter.length > 0\r\n                var filterTags = tFilter.length > 0\r\n\r\n                if (!filterName && !filterTags) {\r\n                    return this.charList;\r\n                }\r\n\r\n                var filtered = []\r\n                for (var c in this.charList) {\r\n                    var character = this.charList[c]\r\n                    if (filterName && character.name.toLowerCase().includes(nameFilter.toLowerCase())) {\r\n                        if(!filtered.includes(character))\r\n                            filtered.push(character)\r\n                        continue\r\n                    }\r\n                    if (filterTags) {\r\n                        var suits = true\r\n\r\n                        for (var tag in tFilter) {\r\n                            if (!character.tags.includes(tFilter[tag])) {\r\n                                suits = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (suits && !filtered.includes(character))\r\n                            filtered.push(character)\r\n                    }\r\n                }\r\n                return filtered;\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            remove_empty_elements: function (stringlist) {\r\n                var newList = []\r\n                for(var s in stringlist){\r\n                    if (stringlist[s] != '')\r\n                        newList.push(stringlist[s])\r\n                }\r\n                return newList\r\n            },\r\n            find_characters: function () {\r\n                var filters = {\r\n                    name: this.charFilter,\r\n                    tags: this.remove_empty_elements(this.tagsFilter)\r\n                }\r\n                this.$socket.emit('find_characters', filters);\r\n            },\r\n            setCharacterList: function (data) {\r\n                var lastCharId = this.currentChar;\r\n                this.charList = data;\r\n\r\n                if (lastCharId) {\r\n                    for (var i in this.charList) {\r\n                        if (this.charList[i].id == lastCharId) {\r\n                            this.selectCharacter();\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n//            filter_characters: function()\r\n//            {\r\n//                var filterName = this.charFilter.length > 0\r\n//                var filterTags = this.tagsFilter.length > 0\r\n//\r\n//                if(!filterName && !filterTags) {\r\n//                    return this.charList;\r\n//                }\r\n//\r\n//                var filtered = []\r\n//                for(var character in this.charList)\r\n//                {\r\n//                    if(filterName && character.includes(this.charFilter)){\r\n//                        filtered.push(character)\r\n//                        continue\r\n//                    }\r\n//                    if(filterTags)\r\n//                    {\r\n//                        var suits = true\r\n//                        for(var tag in this.tagsFilter)\r\n//                        {\r\n//                            if(!character.tags.includes(tag)){\r\n//                                suits = false;\r\n//                                break;\r\n//                            }\r\n//                            if(suits)\r\n//                                filtered.push(character)\r\n//                        }\r\n//                    }\r\n//                }\r\n//                return filtered;\r\n//            },\r\n            selectCharacter: function () {\r\n                if (!this.currentChar || this.currentChar.length == 0) {\r\n                    this.editData = editDataDefault()\r\n                }\r\n                else {\r\n                    var this_app = this;\r\n                    this.$socket.emit('get_character_info', {id: this.currentChar},\r\n                        function (data) {\r\n                            this_app.setCharacterData(JSON.parse(data));\r\n                        });\r\n                }\r\n            },\r\n            setCharacterData: function (data) {\r\n                this.editData = data;\r\n            },\r\n            resetEditData: function () {\r\n                this.editData = editDataDefault();\r\n                this.currentChar = null\r\n            },\r\n            saveChanges: function (data) {\r\n                if (this.currentChar) {\r\n                    var currentCharText = this.$refs['charSelect'].options[this.$refs['charSelect'].selectedIndex].text;\r\n                    if (!window.confirm('Вы точно хотите изменить персонажа \"' + currentCharText + '\"?'))\r\n                        return;\r\n                }\r\n                if (this.editData.name.length == 0 || this.editData.description.length == 0) {\r\n                    alert('Заполните поля \"Имя\" и \"Описание\" для сохранения персонажа');\r\n                    return;\r\n                }\r\n                this.editData.tags = this.remove_empty_elements(this.editData.tags)\r\n                var name = this.editData.name\r\n                var this_app = this;\r\n                this.$socket.emit('save_character', {'Character': this.editData}, function (result) {\r\n\r\n                    if (result) {\r\n                        alert('Персонаж \"' + name + '\" успешно сохранен');\r\n                        this_app.find_characters();\r\n                        this_app.setCharacterData(JSON.parse(result));\r\n                    }\r\n                    else\r\n                        alert('Упс! Не получилось создать персонажа \"' + name + '\"');\r\n                })\r\n            },\r\n            deleteCharacter: function () {\r\n                if (!this.currentChar) {\r\n                    alert('Такого персонажа не существует. Персонаж не выбран или кто-то его уже удалил пока вы тупили. ' +\r\n                        'Перезагрузите страницу');\r\n                    return;\r\n                }\r\n                var currentCharText = this.$refs['charSelect'].options[this.$refs['charSelect'].selectedIndex].text;\r\n                console.log(currentCharText)\r\n                if (window.confirm('Вы точно хотите удалить персонажа \"' + currentCharText + '\"?')) {\r\n                    if (window.confirm('Если потом передумаете придётся восстанавливать вручную. Точно удалять?')) {\r\n                        var this_app = this\r\n                        this.$socket.emit('delete_character', {'Character': this.currentChar},\r\n                            function (result) {\r\n                                console.log(result)\r\n                                if (result) {\r\n                                    alert('Персонаж \"' + currentCharText + '\" удалён');\r\n                                    this_app.resetEditData();\r\n                                    this_app.find_characters();\r\n                                }\r\n                                else\r\n                                    alert('Упс! Что-то пошло не так. Персонаж \"' + currentCharText + '\" не был удалён');\r\n                            });\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        sockets: {\r\n            character_list(data) {\r\n                this.setCharacterList(JSON.parse(data))\r\n            },\r\n\r\n            character_tags(data) {\r\n                this.allTags = JSON.parse(data)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .characterEdit_root {\r\n        padding: 0.5em;\r\n    }\r\n\r\n    input_field {\r\n        border: 1px solid gray;\r\n        padding: 0 0.1em;\r\n    }\r\n\r\n    .flex_container {\r\n        display: -webkit-flex;\r\n        display: flex;\r\n        -webkit-flex-direction: row;\r\n        flex-direction: row;\r\n        flex-wrap: wrap;\r\n    }\r\n\r\n    .flex_element {\r\n        flex-grow: 2;\r\n    }\r\n\r\n    .full_width {\r\n        width: 100%;\r\n    }\r\n\r\n    .space_after {\r\n        padding-right: 0.5rem;\r\n    }\r\n\r\n    .frame {\r\n        border: 1px solid lightgray;\r\n        border-radius: 3px;\r\n    }\r\n\r\n    .thickLine {\r\n        margin: 0.3em 0 0.3em 0;\r\n    }\r\n\r\n    .v_center {\r\n        margin: auto;\r\n    }\r\n\r\n</style>\r\n\r\n<style>\r\n    .characterEdit_root input[type=\"text\"] {\r\n        padding: 0 0.1em;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/characterEdit.vue","<script>\r\n    import ClickOutside from 'onclick-outside';\r\n\r\n    export default {\r\n        model: {\r\n            prop: 'outTags',\r\n            event: 'input'\r\n        },\r\n        props: {\r\n            outTags: Array,\r\n            fullTagList: Array\r\n        },\r\n        components: {\r\n            ClickOutside\r\n        },\r\n        data: function () {\r\n            return {\r\n                listVisible: false,\r\n                listFilter: '',\r\n                focusedItem: null\r\n            }\r\n        },\r\n        computed: {\r\n            tagsFiltered: function () {\r\n                if (this.inputText == 0) {\r\n                    return this.fullTagList\r\n                }\r\n                var tags = []\r\n                for (var t in this.fullTagList) {\r\n\r\n                    if (this.fullTagList[t].includes(this.listFilter))\r\n                        tags.push(this.fullTagList[t])\r\n                }\r\n                return tags\r\n            },\r\n            inputText: {\r\n                get: function () {\r\n                    return this.outTags.join(' ')\r\n                },\r\n                set: function (tags_string) {\r\n                    var tags = this.validateString(tags_string).split(' ')\r\n                    this.$emit('input', tags)\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n//            sendChangeEvent: function(){\r\n//                var tags = this.validateString(this.inputText).split(' ')\r\n//                this.$emit('change', tags)\r\n//            },\r\n            processArrowKeyDown() {\r\n                if (!this.listVisible) {\r\n                    this.setSelectorVisible(true)\r\n                    return;\r\n                }\r\n                if (this.focusedItem == this.$refs.search_input) {\r\n                    this.focusedItem = this.$refs.list.firstElementChild\r\n                }\r\n                else {\r\n                    this.focusedItem = this.focusedItem.nextElementSibling\r\n                    if (!this.focusedItem)\r\n                        this.focusedItem = this.$refs.list.firstElementChild\r\n                }\r\n                if (this.focusedItem)\r\n                    this.focusedItem.focus()\r\n            },\r\n            processArrowKeyUp() {\r\n                if (!this.listVisible) {\r\n                    this.setSelectorVisible(true)\r\n                    return;\r\n                }\r\n                if (this.focusedItem == this.$refs.search_input) {\r\n                    this.focusedItem = this.$refs.list.lastElementChild\r\n                }\r\n                else {\r\n                    this.focusedItem = this.focusedItem.previousElementSibling\r\n                    if (!this.focusedItem)\r\n                        this.focusedItem = this.$refs.list.lastElementChild\r\n                }\r\n                if (this.focusedItem)\r\n                    this.focusedItem.focus()\r\n            },\r\n            setSelectorVisible: function (show, focusInput) {\r\n                this.listVisible = show\r\n                if (!show) {\r\n                    this.listFilter = \"\"\r\n                    if (focusInput) {\r\n                        this.$refs.tags_input.focus()\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    this.$nextTick(() => {\r\n                        this.$refs.search_input.focus();\r\n                        this.focusedItem = this.$refs.search_input;\r\n                    })\r\n                }\r\n            },\r\n            validateString: function (tags_string) {\r\n                var str = tags_string.toLowerCase().replace(/\\s+/g, ' ').replace(/[^\\s0-9a-zA-Zа-яА-Я_]+/, '')\r\n                return str\r\n            },\r\n            addTagToOut(tag) {\r\n                this.setSelectorVisible(false, true)\r\n                if (!this.outTags.includes(tag))\r\n                    this.outTags.push(tag)\r\n            },\r\n            handleClickOutside(e) {\r\n                this.setSelectorVisible(false)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<template>\r\n    <click-outside :handler=\"handleClickOutside\">\r\n        <div @keydown.esc=\"setSelectorVisible(false, true)\" class=\"tags\"\r\n             @keydown.down=\"processArrowKeyDown()\" @keydown.up=\"processArrowKeyUp()\"\r\n       >\r\n            <input type=\"text\" ref=\"tags_input\" placeholder=\"Тэги через пробел\"\r\n                   class=\"tags_input\" v-model=\"inputText\" >\r\n             <!--@change=\"sendChangeEvent\"-->\r\n\r\n            <button @click=\"setSelectorVisible(!listVisible)\" class=\"tags_select_button\"\r\n                    title=\"Добавить тэг из списка существующих.\r\nОткрывается нажатием ↓ из строки поиска\">+\r\n            </button>\r\n\r\n            <div ref=\"tag_list\" class=\"tags_list_frame\" v-if=\"listVisible\">\r\n                <input ref=\"search_input\" type=\"text\" v-model=\"listFilter\" placeholder=\" Поиск\"\r\n                       tabindex=\"0\" class=\"tags_select_search\">\r\n                <ul ref=\"list\" tabindex=\"1\">\r\n                    <li v-for=\"(tag, index) in tagsFiltered\" @click=\"addTagToOut(tag)\"\r\n                        :tabindex=\"index + 1\" class=\"tags_select_li\" @keydown.enter=\"addTagToOut(tag)\">\r\n                        {{ tag }}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </click-outside>\r\n</template>\r\n\r\n\r\n<style scoped>\r\n\r\n    .tags {\r\n        position: relative;\r\n        display: flex;\r\n        flex-grow: 2;\r\n        border: 1px solid lightgray;\r\n    }\r\n\r\n    .tags_input {\r\n        border: none;\r\n        flex-grow: 2;\r\n    }\r\n\r\n    .tags_select_button {\r\n        cursor: pointer;\r\n        border: none;\r\n        border-left: 1px solid #fafafa;\r\n        background: #f8f8f8;\r\n        flex-grow: 0;\r\n    }\r\n\r\n    .tags_select_button:hover {\r\n        background-color: white;\r\n    }\r\n\r\n    .tags_list_frame {\r\n        position: absolute;\r\n        overflow: auto;\r\n        max-height: 6rem;\r\n        top: calc(100% + 2px);\r\n        background: white;\r\n        border-radius: 0;\r\n        right: 0;\r\n        z-index: 100;\r\n        padding: 0.2em;\r\n        border: 1px solid gray;\r\n        box-shadow: 3px 3px 5px 0 rgba(0, 0, 0, 0.2);\r\n    }\r\n\r\n    .tags_list_frame ul {\r\n        margin: 0.3em 0;\r\n    }\r\n\r\n    .tags_list_frame li {\r\n        padding: 0 0.3em 0 0.2em;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .tags_list_frame li:hover {\r\n        background-color: #CFE7F0;\r\n    }\r\n\r\n    .tags_list_frame li:focus {\r\n        background-color: #CFE7F0;\r\n    }\r\n\r\n    .tags_select_search {\r\n        border: none;\r\n        border-bottom: 1px solid lightgray;\r\n    }\r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/tagsInput.vue","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?minimize!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f90f752\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./characterEdit.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"3c6d9f82\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0f90f752\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/characterEdit.vue\n// module id = 269\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".characterEdit_root[data-v-0f90f752]{padding:.5em}input_field[data-v-0f90f752]{border:1px solid gray;padding:0 .1em}.flex_container[data-v-0f90f752]{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;flex-wrap:wrap}.flex_element[data-v-0f90f752]{flex-grow:2}.full_width[data-v-0f90f752]{width:100%}.space_after[data-v-0f90f752]{padding-right:.5rem}.frame[data-v-0f90f752]{border:1px solid #d3d3d3;border-radius:3px}.thickLine[data-v-0f90f752]{margin:.3em 0}.v_center[data-v-0f90f752]{margin:auto}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0f90f752\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/characterEdit.vue\n// module id = 270\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?minimize!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f90f752\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=1!./characterEdit.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"01ca6fc9\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0f90f752\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=1!./src/components/characterEdit.vue\n// module id = 271\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".characterEdit_root input[type=text]{padding:0 .1em}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0f90f752\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=1!./src/components/characterEdit.vue\n// module id = 272\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7a0b7f55\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tagsInput.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tagsInput.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tagsInput.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a0b7f55\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tagsInput.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7a0b7f55\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tagsInput.vue\n// module id = 273\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?minimize!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7a0b7f55\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./tagsInput.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"6338f311\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7a0b7f55\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/tagsInput.vue\n// module id = 274\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tags[data-v-7a0b7f55]{position:relative;display:flex;flex-grow:2;border:1px solid #d3d3d3}.tags_input[data-v-7a0b7f55]{border:none;flex-grow:2}.tags_select_button[data-v-7a0b7f55]{cursor:pointer;border:none;border-left:1px solid #fafafa;background:#f8f8f8;flex-grow:0}.tags_select_button[data-v-7a0b7f55]:hover{background-color:#fff}.tags_list_frame[data-v-7a0b7f55]{position:absolute;overflow:auto;max-height:6rem;top:calc(100% + 2px);background:#fff;border-radius:0;right:0;z-index:100;padding:.2em;border:1px solid gray;box-shadow:3px 3px 5px 0 rgba(0,0,0,.2)}.tags_list_frame ul[data-v-7a0b7f55]{margin:.3em 0}.tags_list_frame li[data-v-7a0b7f55]{padding:0 .3em 0 .2em;cursor:pointer}.tags_list_frame li[data-v-7a0b7f55]:focus,.tags_list_frame li[data-v-7a0b7f55]:hover{background-color:#cfe7f0}.tags_select_search[data-v-7a0b7f55]{border:none;border-bottom:1px solid #d3d3d3}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7a0b7f55\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/tagsInput.vue\n// module id = 275\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('click-outside',{attrs:{\"handler\":_vm.handleClickOutside}},[_c('div',{staticClass:\"tags\",on:{\"keydown\":[function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"esc\",27,$event.key)){ return null; }_vm.setSelectorVisible(false, true)},function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"down\",40,$event.key)){ return null; }_vm.processArrowKeyDown()},function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"up\",38,$event.key)){ return null; }_vm.processArrowKeyUp()}]}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputText),expression:\"inputText\"}],ref:\"tags_input\",staticClass:\"tags_input\",attrs:{\"type\":\"text\",\"placeholder\":\"Тэги через пробел\"},domProps:{\"value\":(_vm.inputText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputText=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"tags_select_button\",attrs:{\"title\":\"Добавить тэг из списка существующих.\\nОткрывается нажатием ↓ из строки поиска\"},on:{\"click\":function($event){_vm.setSelectorVisible(!_vm.listVisible)}}},[_vm._v(\"+\\n            \")]),_vm._v(\" \"),(_vm.listVisible)?_c('div',{ref:\"tag_list\",staticClass:\"tags_list_frame\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.listFilter),expression:\"listFilter\"}],ref:\"search_input\",staticClass:\"tags_select_search\",attrs:{\"type\":\"text\",\"placeholder\":\" Поиск\",\"tabindex\":\"0\"},domProps:{\"value\":(_vm.listFilter)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.listFilter=$event.target.value}}}),_vm._v(\" \"),_c('ul',{ref:\"list\",attrs:{\"tabindex\":\"1\"}},_vm._l((_vm.tagsFiltered),function(tag,index){return _c('li',{staticClass:\"tags_select_li\",attrs:{\"tabindex\":index + 1},on:{\"click\":function($event){_vm.addTagToOut(tag)},\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.addTagToOut(tag)}}},[_vm._v(\"\\n                        \"+_vm._s(tag)+\"\\n                    \")])}))]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7a0b7f55\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tagsInput.vue\n// module id = 276\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"characterEdit_root\"},[_c('fieldset',{staticClass:\"frame\"},[_c('legend',[_vm._v(\"Поиск\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\"},[_c('span',{staticClass:\"space_after v_center\"},[_vm._v(\"Имя\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.charFilter),expression:\"charFilter\"}],staticClass:\"flex_element input_field v_center\",attrs:{\"type\":\"text\",\"maxlength\":\"64\",\"placeholder\":\"Имя или его начало\"},domProps:{\"value\":(_vm.charFilter)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.charFilter=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\"},[_c('span',{staticClass:\"space_after v_center\"},[_vm._v(\"Тэги\")]),_vm._v(\" \"),_c('tags-input',{staticClass:\"flex_element v_center\",attrs:{\"fullTagList\":_vm.allTags,\"maxlength\":\"64\",\"placeholder\":\"Тэги через пробел\"},model:{value:(_vm.tagsFilter),callback:function ($$v) {_vm.tagsFilter=$$v},expression:\"tagsFilter\"}})],1),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentChar),expression:\"currentChar\"}],ref:\"charSelect\",staticClass:\"full_width thickLine\",attrs:{\"size\":\"5\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.currentChar=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.selectCharacter]}},_vm._l((_vm.filteredCharacters),function(ch){return _c('option',{domProps:{\"value\":ch.id}},[_vm._v(_vm._s(ch.name))])}))]),_vm._v(\" \"),_c('fieldset',{staticClass:\"frame\"},[_c('legend',[_vm._v(\"Персонаж\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\"},[_c('span',{staticClass:\"space_after v_center\"},[_vm._v(\"Имя\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editData.name),expression:\"editData.name\"}],staticClass:\"flex_element input_field\",attrs:{\"type\":\"text\",\"maxlength\":\"64\",\"placeholder\":\"Мне нужно ИМЯ!\"},domProps:{\"value\":(_vm.editData.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.editData, \"name\", $event.target.value)}}})]),_vm._v(\" \"),_c('span',{staticClass:\"thickLine v_center\"},[_vm._v(\"Описание\")]),_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"flex_container\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editData.description),expression:\"editData.description\"}],staticClass:\"full_width thickLine\",attrs:{\"rows\":\"4\"},domProps:{\"value\":(_vm.editData.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.editData, \"description\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\",attrs:{\"id\":\"character_tags_container\"},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"esc\",27,$event.key)){ return null; }_vm.showTagSelector(false)}}},[_c('span',{staticClass:\" space_after v_center\"},[_vm._v(\"Тэги\")]),_vm._v(\" \"),_c('tags-input',{staticClass:\"flex_element v_center\",attrs:{\"fullTagList\":_vm.allTags,\"maxlength\":\"64\",\"placeholder\":\"Тэги через пробел\"},model:{value:(_vm.editData.tags),callback:function ($$v) {_vm.$set(_vm.editData, \"tags\", $$v)},expression:\"editData.tags\"}})],1),_vm._v(\" \"),(_vm.editData.author)?_c('div',{staticClass:\"thickLine\"},[_c('span',[_vm._v(\"Автор:\")]),_vm._v(\" \"),_c('span',{staticClass:\"display_frame \"},[_vm._v(_vm._s(_vm.editData.author_name))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"flex_container thickLine\"},[_c('button',{attrs:{\"title\":\"Сбросить редактирование\"},on:{\"click\":_vm.resetEditData}},[_vm._v(\"Новый\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex_element\"}),_vm._v(\" \"),_c('button',{attrs:{\"id\":\"delete_button\",\"title\":\"Отправить персонажа в варп\",\"disabled\":!_vm.currentChar},on:{\"click\":_vm.deleteCharacter}},[_vm._v(\"Удалить\\n            \")]),_vm._v(\" \"),_c('button',{attrs:{\"id\":\"save_button\",\"title\":\"Сохранить\"},on:{\"click\":_vm.saveChanges}},[_vm._v(\"Сохранить\\n            \")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f90f752\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/characterEdit.vue\n// module id = 277\n// module chunks = 1"],"sourceRoot":""}